{% extends "base.html" %}
{% block content %}
<h1>Estoque</h1>

<table>
  <thead>
    <tr>
      <th>Produto</th>
      <th>SKU</th>
      <th>Estoque atual</th>
      <th>Custo unitário (R$)</th>
      <th>Ajuste</th>
    </tr>
  </thead>
  <tbody>
    {% for p in produtos %}
    <tr>
      <td>{{ p['nome'] }}</td>
      <td>{{ p['sku'] }}</td>
      <td>{{ p['estoque_atual'] }}</td>
      <td>{{ '%.2f'|format(p['custo_unitario']) }}</td>
      <td>
        <form class="inline" method="post" action="{{ url_for('ajuste_estoque') }}">
          <input type="hidden" name="produto_id" value="{{ p['id'] }}">
          <select name="tipo">
            <option value="entrada">Entrada</option>
            <option value="saida">Saída</option>
          </select>
          <input type="number" name="quantidade" placeholder="Qtd" style="width:60px;">
          <input type="number" step="0.01" name="custo_unitario" placeholder="Novo custo" style="width:90px;">
          <input type="text" name="observacao" placeholder="Obs." style="width:120px;">
          <button class="btn btn-primary" type="submit">OK</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<p class="small">Dica: use entrada/saída para ajustar estoque e opcionalmente atualizar o custo.</p>
{% endblock %}
