{% extends "layout.html" %}
{% block conteudo %}
<h2>Dashboard</h2>

<div class="row mt-3">
  <div class="col-3">
    <div class="card p-3">
      <h6>Total de Produtos</h6>
      <h3>{{ total_produtos }}</h3>
    </div>
  </div>
  <div class="col-3">
    <div class="card p-3">
      <h6>Estoque Total</h6>
      <h3>{{ estoque_total }}</h3>
    </div>
  </div>
  <div class="col-3">
    <div class="card p-3">
      <h6>Receita Total</h6>
      <h3>R$ {{ '%.2f'|format(receita_total) }}</h3>
    </div>
  </div>
  <div class="col-3">
    <div class="card p-3">
      <h6>Lucro Total</h6>
      <h3>R$ {{ '%.2f'|format(lucro_total) }}</h3>
    </div>
  </div>
</div>

<div class="row mt-3">
  <div class="col-3">
    <div class="card p-3">
      <h6>Margem Média</h6>
      <h3>{{ '%.2f'|format(margem_media) }}%</h3>
    </div>
  </div>
  <div class="col-3">
    <div class="card p-3">
      <h6>Ticket Médio</h6>
      <h3>R$ {{ '%.2f'|format(ticket_medio) }}</h3>
    </div>
  </div>
  <div class="col-3">
    <div class="card p-3">
      <h6>Comissão Total</h6>
      <h3>R$ {{ '%.2f'|format(comissao_total) }}</h3>
    </div>
  </div>
  <div class="col-3">
    <div class="card p-3">
      <h6>Configurações</h6>
      <div>Imposto: {{ cfg.imposto_percent }}%</div>
      <div>Despesas: {{ cfg.despesas_percent }}%</div>
    </div>
  </div>
</div>

{% if produto_mais_vendido or produto_maior_lucro or produto_pior_margem %}
<div class="row mt-4">
  <div class="col-4">
    <div class="card p-3">
      <h6>Produto mais vendido</h6>
      {% if produto_mais_vendido %}
        {{ produto_mais_vendido.nome }} ({{ produto_mais_vendido.qtd }} un.)
      {% else %}-
      {% endif %}
    </div>
  </div>
  <div class="col-4">
    <div class="card p-3">
      <h6>Maior lucro</h6>
      {% if produto_maior_lucro %}
        {{ produto_maior_lucro.nome }}
      {% else %}-
      {% endif %}
    </div>
  </div>
  <div class="col-4">
    <div class="card p-3">
      <h6>Pior margem</h6>
      {% if produto_pior_margem %}
        {{ produto_pior_margem.nome }}
      {% else %}-
      {% endif %}
    </div>
  </div>
</div>
{% endif %}
{% endblock %}
